var net = require("net");

var hl7_message = `
MSH|^~\&|LAB|HOU||1234567|20080515174948||ORU^R01|20080515785887650000|D|2.3|||||||
PID|1||HL007545P||DOE^JOHN||19800101|M||||||||||0001234|||||||||||||
ORC|RE|0007111|HL007545P||IP|||||||B1234^PHYSICIAN^NAME^||||||||
OBR|1|0007111|HL007545P|6517SBX=^MICROALBUMIN/CREATININE RATIO, RANDOM URINE ^^6517SBX=^MICROALBUMIN/CREATININE RATIO, RANDOM URINE |||20080512100000|||||||20080512112200||B95594^PHYSICIAN^NAME^||||^^^8459SB=^CREATININE, RANDOM URINE|HL^QUEST DIAGNOSTICS-HOUSTON|||F|||||||||||||||||||
OBX|1|NM|25026500^CREATININE, RANDOM URINE^^25026500^CREATININE, RANDOM URINE^||100|MG/DL|20-370|N|||F|||20080514130800|HL^^L|||
OBR|2|0007111|HL007545P|6517SBX=^^^6517SBX=^|||20080512100000|||||||20080512112200||B95594^PHYSICIAN^NAME^||||^^^%SB6517^MICROALBUMIN/CREATININE RATIO, RANDOM URINE|HL^QUEST DIAGNOSTICS-HOUSTON|||F|||||||||||||||||||
OBX|1|NM|50060710^MICROALBUMIN^^50060710^MICROALBUMIN^||400|MG/DL|||||F|||20080514130800|HL^^L|||
OBX|2|NM|50061100^MICROALBUMIN/CREATININE RATIO, RANDOM URINE^^50061100^MICROALBUMIN/CREATININE RATIO, RANDOM URINE^||4|MCG/MG CREAT|<30|N|||F|||20080514130800|HL^^L|||
NTE|1|| |
NTE|2||    MICROALBUMIN/CREATININE RATIO IS USED TO CLASSIFY|
NTE|3||PATIENTS AS BEING NORMAL (<30 MCG/MG CREATININE), HAVING |
NTE|4||MICROALBUMINURIA (30-300 MCG/MG CREATININE), OR HAVING |
NTE|5||CLINICAL ALBUMINURIA (>300 MCG/MG CREATININE).|
NTE|6|| |
NTE|7||    THE AMERICAN DIABETES ASSOCIATION POSITION STATEMENT|
NTE|8||ON DIABETIC NEPHROPATHY STATES THAT MICROALBUMINURIA IS |
NTE|9||PRESENT IF THE MICROALBUMIN/CREATININE RATIO EXCEEDS 30 |
NTE|10||MCG/MG CREATININE. THE THRESHOLD FOR CLINICAL ALBUMINURIA|
NTE|11||IS REACHED AT 300 MCG/MG CREATININE. THE CLASSIFICATION OF|
NTE|12||A PATIENT SHOULD BE BASED UPON AT LEAST 2 OF 3 ABNORMAL|
NTE|13||RESULTS ON SPECIMENS COLLECTED WITHIN A 3 TO 6 MONTH TIME|
NTE|14||FRAME.|
NTE|15|| |
NTE|16||REFERENCE:|
NTE|17|| |
NTE|18||AMERICAN DIABETES ASSOCIATION, POSITION STATEMENT, DIABETIC |
NTE|19||NEPHROPATHY, DIABETES CARE, 20, SUPPLEMENT 1, S24-S27, 1997.|
NTE|20|| |
OBR|3|0007111|HL007545P|10231SB=^COMPREHENSIVE METABOLIC PANEL^^10231SB=^COMPREHENSIVE METABOLIC PANEL|||20080512100000|||||||20080512112200||B95594^PHYSICIAN^NAME^|||||HL^QUEST DIAGNOSTICS-HOUSTON|||P|||||||||||||||||||
OBX|1|ST|25000000^GLUCOSE^^25000000^GLUCOSE^|||||N|||F|||20080514130800|HL^^L|||
OBX|2|ST|25000100^UREA NITROGEN (BUN)^^25000100^UREA NITROGEN (BUN)^|||||N|||F|||20080514130800|HL^^L|||
OBX|3|ST|25000200^CREATININE^^25000200^CREATININE^|||||N|||F|||20080514130800|HL^^L|||
OBX|4|ST|25000300^BUN/CREATININE RATIO^^25000300^BUN/CREATININE RATIO^|||||N|||F|||20080514130800|HL^^L|||
OBX|5|ST|25000400^SODIUM^^25000400^SODIUM^|||||N|||F|||20080514130800|HL^^L|||
OBX|6|ST|25000500^POTASSIUM^^25000500^POTASSIUM^|||||N|||F|||20080514130800|HL^^L|||
OBX|7|ST|25000600^CHLORIDE^^25000600^CHLORIDE^|||||N|||F|||20080514130800|HL^^L|||
OBX|8|ST|25000700^CARBON DIOXIDE^^25000700^CARBON DIOXIDE^|||||N|||F|||20080514130800|HL^^L|||
OBX|9|ST|25001000^CALCIUM^^25001000^CALCIUM^|||||N|||X|||20080514130800|HL^^L|||
OBX|10|ST|25001300^PROTEIN, TOTAL^^25001300^PROTEIN, TOTAL^|||||N|||C|||20080514130800|HL^^L|||
OBX|11|ST|25001400^ALBUMIN^^25001400^ALBUMIN^|||||N|||F|||20080514130800|HL^^L|||
OBX|12|ST|25001500^GLOBULIN^^25001500^GLOBULIN^|||||N|||F|||20080514130800|HL^^L|||
OBX|13|ST|25001600^ALBUMIN/GLOBULIN RATIO^^25001600^ALBUMIN/GLOBULIN RATIO^|||||N|||F|||20080514130800|HL^^L|||
OBX|14|ST|25001700^BILIRUBIN, TOTAL^^25001700^BILIRUBIN, TOTAL^|||||N|||F|||20080514130800|HL^^L|||
OBX|15|ST|25002000^ALKALINE PHOSPHATASE^^25002000^ALKALINE PHOSPHATASE^|||||N|||F|||20080514130800|HL^^L|||
OBX|16|ST|25002300^AST^^25002300^AST^|||||N|||F|||20080514130800|HL^^L|||
OBX|17|ST|25002400^ALT^^25002400^ALT^|||||N|||F|||20080514130800|HL^^L|||
OBR|4|0007111|HL007545P|608SB=^HDL CHOLESTEROL^^608SB=^HDL CHOLESTEROL|||20080512100000|||||||20080512112200||B95594^PHYSICIAN^NAME^|||||HL^QUEST DIAGNOSTICS-HOUSTON|||P|||||||||||||||||||
OBX|1|ST|25015900^HDL CHOLESTEROL^^25015900^HDL CHOLESTEROL^|||||N|||F|||20080514130800|HL^^L|||
OBR|5|0007111|HL007545P|6399SB=^CBC (INCLUDES DIFF/PLT)^^6399SB=^CBC (INCLUDES DIFF/PLT)|||20080512100000|||||||20080512112200||B95594^PHYSICIAN^NAME^|||||HL^QUEST DIAGNOSTICS-HOUSTON|||P|||||||||||||||||||
OBX|1|ST|30000000^WHITE BLOOD CELL COUNT^^30000000^WHITE BLOOD CELL COUNT^|||||N|||F|||20080514130800|HL^^L|||
OBX|2|ST|30000100^RED BLOOD CELL COUNT^^30000100^RED BLOOD CELL COUNT^|||||N|||F|||20080514130800|HL^^L|||
OBX|3|ST|30000200^HEMOGLOBIN^^30000200^HEMOGLOBIN^|||||N|||F|||20080514130800|HL^^L|||
OBX|4|ST|30000300^HEMATOCRIT^^30000300^HEMATOCRIT^|||||N|||F|||20080514130800|HL^^L|||
OBX|5|ST|30000400^MCV^^30000400^MCV^|||||N|||F|||20080514130800|HL^^L|||
OBX|6|ST|30000500^MCH^^30000500^MCH^|||||N|||F|||20080514130800|HL^^L|||
OBX|7|ST|30000600^MCHC^^30000600^MCHC^|||||N|||F|||20080514130800|HL^^L|||
OBX|8|ST|30000700^RDW^^30000700^RDW^|||||N|||F|||20080514130800|HL^^L|||
OBX|9|ST|30000800^PLATELET COUNT^^30000800^PLATELET COUNT^|||||N|||F|||20080514130800|HL^^L|||
OBX|10|ST|30004600^MPV^^30004600^MPV^|||||N|||F|||20080514130800|HL^^L|||
OBX|11|ST|30001700^ABSOLUTE NEUTROPHILS^^30001700^ABSOLUTE NEUTROPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|12|ST|30001110^ABSOLUTE BAND NEUTROPHILS^^30001110^ABSOLUTE BAND NEUTROPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|13|ST|30001310^ABSOLUTE METAMYELOCYTES^^30001310^ABSOLUTE METAMYELOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|14|ST|30001510^ABSOLUTE MYELOCYTES^^30001510^ABSOLUTE MYELOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|15|ST|30001530^ABSOLUTE PROMYELOCYTES^^30001530^ABSOLUTE PROMYELOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|16|ST|30002110^ABSOLUTE LYMPHOCYTES^^30002110^ABSOLUTE LYMPHOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|17|ST|30002400^ABSOLUTE MONOCYTES^^30002400^ABSOLUTE MONOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|18|ST|30002700^ABSOLUTE EOSINOPHILS^^30002700^ABSOLUTE EOSINOPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|19|ST|30003000^ABSOLUTE BASOPHILS^^30003000^ABSOLUTE BASOPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|20|ST|30003500^ABSOLUTE BLASTS^^30003500^ABSOLUTE BLASTS^|||||N|||F|||20080514130800|HL^^L|||
OBX|21|ST|30003610^ABSOLUTE NUCLEATED RBC^^30003610^ABSOLUTE NUCLEATED RBC^|||||N|||F|||20080514130800|HL^^L|||
OBX|22|ST|30000900^NEUTROPHILS^^30000900^NEUTROPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|23|ST|30001100^BAND NEUTROPHILS^^30001100^BAND NEUTROPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|24|ST|30001300^METAMYELOCYTES^^30001300^METAMYELOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|25|ST|30001500^MYELOCYTES^^30001500^MYELOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|26|ST|30001520^PROMYELOCYTES^^30001520^PROMYELOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|27|ST|30001800^LYMPHOCYTES^^30001800^LYMPHOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|28|ST|30002000^REACTIVE LYMPHOCYTES^^30002000^REACTIVE LYMPHOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|29|ST|30002200^MONOCYTES^^30002200^MONOCYTES^|||||N|||F|||20080514130800|HL^^L|||
OBX|30|ST|30002500^EOSINOPHILS^^30002500^EOSINOPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|31|ST|30002800^BASOPHILS^^30002800^BASOPHILS^|||||N|||F|||20080514130800|HL^^L|||
OBX|32|ST|30003400^BLASTS^^30003400^BLASTS^|||||N|||F|||20080514130800|HL^^L|||
OBX|33|ST|30003600^NUCLEATED RBC^^30003600^NUCLEATED RBC^|||||N|||F|||20080514130800|HL^^L|||
OBX|34|ST|30003620^INTERFACE FLAG^^30003620^INTERFACE FLAG^|||||N|||F|||20080514130800|HL^^L|||
OBX|35|ST|30004200^COMMENT(S)^^30004200^COMMENT(S)^|||||N|||F|||20080514130800|HL^^L|||
OBR|6|0007111|HL007545P|8847SB=^PROTHROMBIN TIME WITH INR^^8847SB=^PROTHROMBIN TIME WITH INR|||20080512100000|||||||20080512112200||B95594^PHYSICIAN^NAME^|||||HL^QUEST DIAGNOSTICS-HOUSTON|||F|||||||||||||||||||
OBX|1|TX|30040200^INTERNATIONAL NORMALIZED RATIO (INR)^^30040200^INTERNATIONAL NORMALIZED RATIO (INR)^|||||N|||F|||20080514130800|HL^^L|||
NTE|1||          INR REFERENCE INTERVAL APPLIES TO PATIENTS|
NTE|2||          NOT ON ANTICOAGULANT THERAPY:                    0.9- 1.1|
NTE|3|| |
NTE|4||          SUGGESTED INR THERAPEUTIC RANGE FOR ORAL|
NTE|5||          ANTICOAGULANT THERAPY (STABLY ANTICOAGULATED|
NTE|6||          PATIENTS)|
NTE|7|| |
NTE|8||                    ROUTINE THERAPY:                       2.0- 3.0|
NTE|9|| |
NTE|10||                    RECURRENT MYOCARDIAL INFARCTION|
NTE|11||                    OR MECHANICAL PROSTHETIC VALVES:       2.5- 3.5|
NTE|12|| |
NTE|13|| |
OBX|2|NM|30039900^PROTHROMBIN TIME^^30039900^PROTHROMBIN TIME^||100|SECONDS|9.0-11.5|H|||F|||20080514130800|HL^^L|||
`;

var client = new net.Socket();
client.connect(6661, "127.0.0.1", function () {
  console.log("Connected");
  client.write(hl7_message);
  client.destroy();
});
